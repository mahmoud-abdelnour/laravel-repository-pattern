"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[6782],{6782:(K,h,a)=>{a.r(h),a.d(h,{RolesModule:()=>w});var v=a(6895),C=a(9197),Z=a(2252),y=a(8674),l=a(4763),x=a(5033),m=a(1511),t=a(4650),A=a(9807),T=a(7392),u=a(4859);function R(e,s){if(1&e){const o=t.EpF();t.TgZ(0,"button",2),t.NdJ("click",function(){t.CHM(o);const i=t.oxw();return t.KtG(i.parent.openPermissions(i.rowData))}),t.TgZ(1,"mat-icon",3),t._uU(2,"manage_accounts"),t.qZA()()}}function J(e,s){if(1&e){const o=t.EpF();t.TgZ(0,"button",2),t.NdJ("click",function(){t.CHM(o);const i=t.oxw(2);return t.KtG(i.parent.openDialog(i.FormMode.Update,i.rowData))}),t.TgZ(1,"mat-icon",4),t._uU(2,"edit"),t.qZA()()}}function D(e,s){if(1&e){const o=t.EpF();t.TgZ(0,"button",2),t.NdJ("click",function(){t.CHM(o);const i=t.oxw(2);return t.KtG(i.parent.popDelete(i.rowData))}),t.TgZ(1,"mat-icon",5),t._uU(2,"delete"),t.qZA()()}}function L(e,s){1&e&&(t.ynx(0),t.YNc(1,J,3,0,"button",0),t.YNc(2,D,3,0,"button",0),t.BQk()),2&e&&(t.xp6(1),t.Q6J("appPerm","edit_role"),t.xp6(1),t.Q6J("appPerm","delete_role"))}let _=(()=>{class e{constructor(){this.FormMode=l.h}}return e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-actions"]],hostAttrs:[1,"list-actions-btns"],decls:2,vars:2,consts:[["mat-button","",3,"click",4,"appPerm"],[4,"ngIf"],["mat-button","",3,"click"],[1,"permissions"],["color","primary"],["color","warn"]],template:function(o,n){1&o&&(t.YNc(0,R,3,0,"button",0),t.YNc(1,L,3,2,"ng-container",1)),2&o&&(t.Q6J("appPerm","edit_role"),t.xp6(1),t.Q6J("ngIf","super_admin"!==n.rowData.name))},dependencies:[v.O5,A.$,T.Hw,u.lW],styles:[".permissions[_ngcontent-%COMP%]{color:#555}"]}),e})();var p=a(5412),b=a(9242),F=a(2278),f=a(3416),M=a(8038),g=a(3546),N=a(4387),r=a(4006),U=a(8746),S=a(4115);let Y=(()=>{class e{constructor(o){this.apiService=o,this.FormMode=l.h,this.isSaving=!1}ngOnInit(){this.form=new r.cw({name:new r.NI(null,r.kI.required)}),this.mode!=l.h.Create&&(this.form.patchValue(this.data),this.mode==l.h.View&&this.form.disable())}save(){console.log(this.form),this.form.invalid||(this.isSaving=!0,(this.mode==l.h.Create?this.apiService.post(m.A.provider.roles,this.form.value):this.apiService.put(`${m.A.provider.roles}/${this.data.id}`,this.form.value)).pipe((0,U.x)(()=>this.isSaving=!1)).subscribe(n=>{console.log(n),this.ref.close(n)}))}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(b.s))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-create"]],hostAttrs:[1,"app-dialog"],inputs:{mode:"mode",ref:"ref",data:"data"},decls:19,vars:19,consts:[[3,"formGroup","ngSubmit"],["mat-dialog-title",""],[1,"mat-typography"],[1,"mb-4","form-group"],["for","name"],["id","name","formControlName","name",3,"placeholder"],["align","end",1,"actions"],["type","button","mat-button","","mat-dialog-close","",1,"cancel"],["mat-button","","cdkFocusInitial","",1,"save"]],template:function(o,n){1&o&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return n.save()}),t.TgZ(1,"h2",1),t._uU(2),t.ALo(3,"translate"),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"mat-dialog-content",2)(6,"div",3)(7,"label",4),t._uU(8),t.ALo(9,"translate"),t.qZA(),t._UZ(10,"input",5),t.ALo(11,"translate"),t.qZA()(),t.TgZ(12,"mat-dialog-actions",6)(13,"button",7),t._uU(14),t.ALo(15,"translate"),t.qZA(),t.TgZ(16,"button",8),t._uU(17),t.ALo(18,"translate"),t.qZA()()()),2&o&&(t.Q6J("formGroup",n.form),t.xp6(2),t.AsE(" ",t.lcZ(3,7,n.mode)," ",t.lcZ(4,9,"Role")," "),t.xp6(6),t.hij(" ",t.lcZ(9,11,"RoleName")," "),t.xp6(2),t.Q6J("placeholder",t.lcZ(11,13,"RoleName")),t.xp6(4),t.hij(" ",t.lcZ(15,15,"Cancel")," "),t.xp6(3),t.hij(" ",t.lcZ(18,17,"Save")," "))},dependencies:[u.lW,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u,p.ZT,p.uh,p.xY,p.H8,S.hL,S.J5,f.X$]}),e})();const G=["dialog"],Q=["permissionDialog"],P=["table"];function H(e,s){if(1&e){const o=t.EpF();t.TgZ(0,"mat-card-header")(1,"div",6),t._UZ(2,"div"),t.TgZ(3,"button",7),t.NdJ("click",function(){t.CHM(o);const i=t.oxw();return t.KtG(i.openDialog())}),t.TgZ(4,"mat-icon"),t._uU(5,"add"),t.qZA(),t._uU(6),t.ALo(7,"translate"),t.ALo(8,"translate"),t.qZA()()()}2&e&&(t.xp6(6),t.AsE(" ",t.lcZ(7,2,"Create")," ",t.lcZ(8,4,"Role")," "))}function $(e,s){if(1&e&&t._UZ(0,"app-create",8),2&e){const n=s.$implicit;t.Q6J("ref",s.dialogRef)("data",n.data)("mode",n.mode)}}function j(e,s){if(1&e&&t._UZ(0,"app-permissions",9),2&e){const o=s.dialogRef,n=s.$implicit,i=t.oxw();t.Q6J("ref",o)("data",n.data)("type",i.PermissionsType.role)}}const I=[{path:"list",component:(()=>{class e{constructor(o,n,i,c){this.matDialog=o,this.apiService=n,this.themeService=i,this.translateService=c,this.apiFunc=d=>this.apiService.get(m.A.provider.roles,d),this.PermissionsType=x.Z,this.settings={columns:{name:{title:this.translateService.instant("Name"),type:Z.Jm.Text,filter:!1},actions:{title:this.translateService.instant("Options"),type:Z.Jm.Custom,renderComponent:_,sort:!1,filter:!1,onComponentInitFunction:d=>d.parent=this}}}}ngOnInit(){}popDelete(o){this.rowToDelete=o.id,this.matDialog.open(y.F,{data:{parent:this}})}delete(){this.apiService.delete(m.A.provider.roles+"/"+this.rowToDelete).subscribe(o=>{this.themeService.openSnackBar("DeleteSuccessMSG",null)})}openDialog(o=l.h.Create,n=null){this.matDialog.open(this.dialog,{data:{data:n,mode:o}}).afterClosed().subscribe(c=>{c&&this.table.reloadTable()})}openPermissions(o){this.matDialog.open(this.permissionDialog,{data:{data:o}}).afterClosed().subscribe(i=>{if(i){let c={...o,permissions:i};delete c.settings,this.apiService.put(`${m.A.provider.roles}/${o.id}`,c).subscribe(d=>{this.themeService.openSnackBar("SavedSuccessfully",null),this.table.reloadTable()})}})}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(p.uw),t.Y36(b.s),t.Y36(F.f),t.Y36(f.sK))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-list"]],viewQuery:function(o,n){if(1&o&&(t.Gf(G,5),t.Gf(Q,5),t.Gf(P,5)),2&o){let i;t.iGM(i=t.CRH())&&(n.dialog=i.first),t.iGM(i=t.CRH())&&(n.permissionDialog=i.first),t.iGM(i=t.CRH())&&(n.table=i.first)}},decls:13,vars:6,consts:[[1,"card-cont"],[4,"appPerm"],[3,"settings","apiFunc"],["table",""],["dialog",""],["permissionDialog",""],[1,"d-flex","align-items-center","justify-content-between"],["mat-raised-button","",1,"add-btn",3,"click"],[3,"ref","data","mode"],[3,"ref","data","type"]],template:function(o,n){1&o&&(t.TgZ(0,"section",0)(1,"h2"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"mat-card"),t.YNc(5,H,9,6,"mat-card-header",1),t.TgZ(6,"mat-card-content"),t._UZ(7,"app-table",2,3),t.qZA()()(),t.YNc(9,$,1,3,"ng-template",null,4,t.W1O),t.YNc(11,j,1,3,"ng-template",null,5,t.W1O)),2&o&&(t.xp6(2),t.hij(" ",t.lcZ(3,4,"Roles")," "),t.xp6(3),t.Q6J("appPerm","create_role"),t.xp6(2),t.Q6J("settings",n.settings)("apiFunc",n.apiFunc))},dependencies:[M.a,A.$,T.Hw,g.a8,g.dk,g.dn,u.lW,N.v,Y,f.X$]}),e})()},{path:"",redirectTo:"list",pathMatch:"full"}];let B=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[C.Bz.forChild(I),C.Bz]}),e})();var O=a(5754),E=a(154);let w=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[v.ez,B,O.m,E.S]}),e})()}}]);