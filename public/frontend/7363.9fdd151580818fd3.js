"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[7363],{7363:(A,y,n)=>{n.r(y),n.d(y,{TasksModule:()=>R});var c=n(6895),e=n(9197),p=n(2252),h=n(4763),f=n(1511),t=n(4650),u=n(7392),v=n(4859);let g=(()=>{class a{constructor(){this.FormMode=h.h}ngOnInit(){}}return a.\u0275fac=function(o){return new(o||a)},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-actions"]],hostAttrs:[1,"list-actions-btns"],decls:9,vars:0,consts:[["mat-button","",3,"click"],["color","primary"],["color","warn"]],template:function(o,i){1&o&&(t.TgZ(0,"button",0),t.NdJ("click",function(){return i.parent.openDialog(i.FormMode.Update,i.rowData)}),t.TgZ(1,"mat-icon",1),t._uU(2," edit "),t.qZA()(),t.TgZ(3,"button",0),t.NdJ("click",function(){return i.parent.openDialog(i.FormMode.View,i.rowData)}),t.TgZ(4,"mat-icon"),t._uU(5," visibility "),t.qZA()(),t.TgZ(6,"button",0),t.NdJ("click",function(){return i.parent.popDelete(i.rowData)}),t.TgZ(7,"mat-icon",2),t._uU(8," delete "),t.qZA()())},dependencies:[u.Hw,v.lW]}),a})();var d=n(8674),C=n(5412),Z=n(9242),M=n(3416),F=n(2278),P=n(8038),T=n(3546),U=n(3523);const b=["dialog"],L=["table"];function O(a,l){if(1&a&&t._UZ(0,"app-task-dialog",6),2&a){const o=l.dialogRef,i=l.$implicit;t.oxw();const s=t.MAs(14);t.Q6J("ref",o)("data",i.data)("employees",i.employees)("table",s)("mode",i.mode)}}const k=[{path:"list",component:(()=>{class a{constructor(o,i,s,D,I){this.matDialog=o,this.apiService=i,this.translateService=s,this.datePipe=D,this.themeService=I,this.FormMode=h.h,this.apiFunc=(m={})=>this.apiService.get(f.A.company.emp_task,m),this.settings={columns:{employee:{title:"\u0627\u0644\u0645\u0648\u0638\u0641",type:p.Jm.Text,filter:!0,valuePrepareFunction:(m,r)=>r.employee.name_ar},task_title:{title:"\u0639\u0646\u0648\u0627\u0646 \u0627\u0644\u0645\u0647\u0645\u0629",type:p.Jm.Text,filter:!0,valuePrepareFunction:(m,r)=>r.task.task_title},task_period:{title:"\u0645\u062f\u0629 \u0627\u0644\u0645\u0647\u0645\u0629",type:p.Jm.Text,valuePrepareFunction:(m,r)=>r.task.task_period+" \u0633\u0627\u0639\u0629"},created_at:{title:"\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0627\u0633\u0646\u0627\u062f",type:p.Jm.Text,valuePrepareFunction:(m,r)=>this.datePipe.transform(r.created_at,"yyyy/MM/dd")},started_at:{title:"\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0628\u062f\u0621",type:"string",valuePrepareFunction:(m,r)=>this.datePipe.transform(r.started_at,"yyyy/MM/dd h:mm a")},finished_at:{title:"\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0627\u0646\u062a\u0647\u0627\u0621",type:"string",valuePrepareFunction:(m,r)=>this.datePipe.transform(r.finished_at,"yyyy/MM/dd h:mm a")},actions:{title:this.translateService.instant("Options"),type:p.Jm.Custom,renderComponent:g,sort:!1,filter:!1,onComponentInitFunction:(m,r)=>{m.parent=this}}}}}ngOnInit(){this.apiService.get(f.A.company.list_employees,{limit:!1}).subscribe(o=>{console.log(o),this.employees=o.data})}openDialog(o=h.h.Create,i=null){this.matDialog.open(this.dialog,{data:{data:i,employees:this.employees,mode:o}}).afterClosed().subscribe(D=>{D&&this.table.reloadTable()})}popDelete(o){this.rowToDelete=o.id;let i=this.matDialog.open(d.F,{data:{parent:this}});i.componentInstance.header="DeleteTaskTitle",i.componentInstance.body="DeleteTaskMSG"}delete(){this.apiService.delete(f.A.company.delete_task+"/"+this.rowToDelete).subscribe(o=>{this.themeService.openSnackBar("DeleteSuccessMSG",null),this.table.reloadTable()})}}return a.\u0275fac=function(o){return new(o||a)(t.Y36(C.uw),t.Y36(Z.s),t.Y36(M.sK),t.Y36(c.uU),t.Y36(F.f))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-list"]],viewQuery:function(o,i){if(1&o&&(t.Gf(b,5),t.Gf(L,5)),2&o){let s;t.iGM(s=t.CRH())&&(i.dialog=s.first),t.iGM(s=t.CRH())&&(i.table=s.first)}},features:[t._Bn([c.uU])],decls:17,vars:5,consts:[[1,"card-cont"],[1,"d-flex","align-items-center","justify-content-between"],["mat-raised-button","",1,"add-btn",3,"click"],[3,"settings","apiFunc"],["table",""],["dialog",""],[3,"ref","data","employees","table","mode"]],template:function(o,i){1&o&&(t.TgZ(0,"section",0)(1,"h2"),t._uU(2," \u0627\u0644\u0645\u0647\u0627\u0645 "),t.qZA(),t.TgZ(3,"mat-card")(4,"mat-card-header")(5,"div",1),t._UZ(6,"div"),t.TgZ(7,"button",2),t.NdJ("click",function(){return i.openDialog()}),t.TgZ(8,"mat-icon"),t._uU(9,"add"),t.qZA(),t._uU(10),t.ALo(11,"translate"),t.qZA()()(),t.TgZ(12,"mat-card-content"),t._UZ(13,"app-table",3,4),t.qZA()()(),t.YNc(15,O,1,5,"ng-template",null,5,t.W1O)),2&o&&(t.xp6(10),t.hij(" ",t.lcZ(11,3,i.FormMode.Create)," \u0645\u0647\u0645\u0629 "),t.xp6(3),t.Q6J("settings",i.settings)("apiFunc",i.apiFunc))},dependencies:[P.a,u.Hw,T.a8,T.dk,T.dn,v.lW,U.S,M.X$]}),a})()},{path:"",redirectTo:"list",pathMatch:"full"}];let S=(()=>{class a{}return a.\u0275fac=function(o){return new(o||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[e.Bz.forChild(k),e.Bz]}),a})();var E=n(5754),J=n(3238),_=n(9602),B=n(5605);let R=(()=>{class a{}return a.\u0275fac=function(o){return new(o||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[c.ez,S,E.m,J.XK,_.FA,B.L]}),a})()},8674:(A,y,n)=>{n.d(y,{F:()=>t});var c=n(5412),e=n(4650),p=n(3416),h=n(7392),f=n(4859);let t=(()=>{class u{constructor(g,d){this.translateService=g,this.data=d,this.header="DialogRemoveMessage",this.body="TableDeleteMessage",this.confirmBtn="Delete"}ngOnInit(){console.log(this.data),this.parent=this.data?.parent}}return u.\u0275fac=function(g){return new(g||u)(e.Y36(p.sK),e.Y36(c.WI))},u.\u0275cmp=e.Xpm({type:u,selectors:[["app-delete-dialog"]],decls:16,vars:13,consts:[["mat-dialog-title",""],["color","warn"],["mat-dialog-content",""],["mat-dialog-actions","","align","end"],["mat-button","","mat-dialog-close","","color","warn",3,"mat-dialog-close","click"],["mat-button","","mat-dialog-close","","cdkFocusInitial","","color","primary"]],template:function(g,d){1&g&&(e.TgZ(0,"h2",0)(1,"mat-icon",1),e._uU(2," warning "),e.qZA(),e.TgZ(3,"span"),e._uU(4),e.ALo(5,"translate"),e.qZA()(),e.TgZ(6,"div",2),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"div",3)(10,"button",4),e.NdJ("click",function(){return null==d.parent?null:d.parent.delete()}),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.TgZ(13,"button",5),e._uU(14),e.ALo(15,"translate"),e.qZA()()),2&g&&(e.xp6(4),e.hij(" ",e.lcZ(5,5,d.header)," "),e.xp6(3),e.hij(" ",e.lcZ(8,7,d.body),"\n"),e.xp6(3),e.Q6J("mat-dialog-close",!0),e.xp6(1),e.hij(" ",e.lcZ(12,9,d.confirmBtn)," "),e.xp6(3),e.hij(" ",e.lcZ(15,11,"Back")," "))},dependencies:[h.Hw,f.lW,c.ZT,c.uh,c.xY,c.H8,p.X$],styles:["h2[_ngcontent-%COMP%]{display:flex;align-items:center}h2[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:16px;margin-right:16px}"]}),u})()}}]);