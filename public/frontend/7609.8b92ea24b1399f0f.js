"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[7609],{7609:(U,v,i)=>{i.r(v),i.d(v,{MessagesModule:()=>tt});var l=i(6895),g=i(9197),d=i(2252),f=i(1511),t=i(4650),J=i(7392),h=i(4859);let M=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-actions"]],hostAttrs:[1,"list-actions-btns"],decls:3,vars:0,consts:[["mat-button","",3,"click"],[1,"eye"]],template:function(n,o){1&n&&(t.TgZ(0,"button",0),t.NdJ("click",function(){return o.parent.openDialog(o.parent.viewMsg,o.rowData,o.view_type)}),t.TgZ(1,"mat-icon",1),t._uU(2,"visibility"),t.qZA()())},dependencies:[J.Hw,h.lW]}),e})();var c=i(5412),O=i(2278),A=i(8015),b=i(9242),S=i(3416),w=i(8038),C=i(3546),y=i(3848),u=i(4006),I=i(8746),x=i(4763),p=i(7461),F=i(4115),Z=i(1948),T=i(7957),P=i(3238);function N(e,a){if(1&e&&(t.TgZ(0,"mat-option",15),t._uU(1),t.qZA()),2&e){const n=a.$implicit;t.Q6J("value",n),t.xp6(1),t.hij(" ",n.name_ar," ")}}function Q(e,a){if(1&e){const n=t.EpF();t.ynx(0),t.TgZ(1,"div",5)(2,"label",13),t._uU(3," \u0627\u0644\u0645\u0631\u0633\u0644 \u0627\u0644\u064a\u0647 "),t.qZA(),t.TgZ(4,"mat-radio-group",14),t.NdJ("change",function(){t.CHM(n);const s=t.MAs(14),m=t.oxw();return t.KtG(m.changeFilter(s.value=null))}),t.TgZ(5,"mat-radio-button",15),t._uU(6," \u0645\u0648\u0638\u0641 "),t.qZA(),t._UZ(7,"span",16),t.TgZ(8,"mat-radio-button",15),t._uU(9," \u0634\u0631\u0643\u0629 "),t.qZA()()(),t.TgZ(10,"div",17)(11,"label",18),t._uU(12),t.qZA(),t.TgZ(13,"input",19,20),t.NdJ("keyup",function(s){t.CHM(n);const m=t.oxw();return t.KtG(m.onSearch(s.target.value))}),t.qZA()(),t.TgZ(15,"mat-autocomplete",21,22),t.NdJ("optionSelected",function(s){t.CHM(n);const m=t.oxw();return t.KtG(m.optionSelected(s.option.value))}),t.YNc(17,N,2,2,"mat-option",23),t.qZA(),t.BQk()}if(2&e){const n=t.MAs(16),o=t.oxw();t.xp6(5),t.Q6J("value",o.UserType.employee),t.xp6(3),t.Q6J("value",o.UserType.company),t.xp6(4),t.hij(" \u0627\u0628\u062d\u062b \u0639\u0646 ",o.form.controls.user_type.value==o.UserType.employee?"\u0645\u0648\u0638\u0641":"\u0634\u0631\u0643\u0629"," "),t.xp6(1),t.Q6J("matAutocomplete",n),t.xp6(2),t.Q6J("displayWith",o.displayFn),t.xp6(2),t.Q6J("ngForOf",o.items)}}let Y=(()=>{class e{constructor(n,o){this.apiService=n,this.userService=o,this.FormMode=x.h,this.UserType=p.F}ngOnInit(){this.form=new u.cw({message_title:new u.NI(null,u.kI.required),message_content:new u.NI(null,u.kI.required),user_type:new u.NI(this.userService.userData.user_type!==p.F.provider?p.F.provider:p.F.employee,u.kI.required),message_to:new u.NI(this.userService.userData.user_type!==p.F.provider?p.F.provider:null,this.userService.userData.user_type===p.F.provider?u.kI.required:null)}),this.onSearch("",!0)}onSearch(n,o=!1){this.subscription&&this.subscription.unsubscribe(),this.items=[],this.subscription=this.apiService.get(this.form.value.user_type==p.F.employee?f.A.provider.employees:f.A.provider.companies,{limit:o,name_ar:n}).subscribe(s=>{this.items=s.data})}displayFn(n){return n?.name_ar||""}optionSelected(n){this.form.controls.message_to.setValue(n.user_id)}changeFilter(n){console.log(n),this.form.controls.message_to.setValue(null),this.onSearch("",!0)}save(){this.form.invalid||(this.isSaving=!0,this.apiService.post(f.A.messages.messages,this.form.value).pipe((0,I.x)(()=>this.isSaving=!1)).subscribe(n=>{this.ref.close(!0)}))}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(b.s),t.Y36(A.K))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-create"]],hostAttrs:[1,"app-dialog"],inputs:{data:"data",mode:"mode",ref:"ref"},decls:19,vars:3,consts:[[3,"formGroup","ngSubmit"],["mat-dialog-title",""],[1,"mat-typography"],[1,"row"],[4,"ngIf"],[1,"col-md-12","form-group","mb-4"],["for","message_title"],["type","text","id","message_title","formControlName","message_title"],["for","message_content"],["formControlName","message_content","id","message_content","cols","20","rows","3"],["align","end",1,"actions"],["mat-button","","mat-dialog-close","",1,"cancel"],["mat-button","","cdkFocusInitial","",1,"save",3,"disabled"],["for","user_type"],["color","primary","formControlName","user_type",3,"change"],[3,"value"],[1,"ms-3","me-3"],[1,"form-group","mb-4"],["for","search"],["id","search","type","text",3,"matAutocomplete","keyup"],["input",""],[3,"displayWith","optionSelected"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"]],template:function(n,o){1&n&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return o.save()}),t.TgZ(1,"h2",1),t._uU(2," \u0625\u0631\u0633\u0627\u0644 \u0631\u0633\u0627\u0644\u0629 "),t.qZA(),t.TgZ(3,"mat-dialog-content",2)(4,"div",3),t.YNc(5,Q,18,6,"ng-container",4),t.TgZ(6,"div",5)(7,"label",6),t._uU(8," \u0639\u0646\u0648\u0627\u0646 \u0627\u0644\u0631\u0633\u0627\u0644\u0629 "),t.qZA(),t._UZ(9,"input",7),t.qZA(),t.TgZ(10,"div",5)(11,"label",8),t._uU(12," \u0627\u0644\u0631\u0633\u0627\u0644\u0629 "),t.qZA(),t._UZ(13,"textarea",9),t.qZA()()(),t.TgZ(14,"mat-dialog-actions",10)(15,"button",11),t._uU(16," \u0625\u063a\u0644\u0627\u0642 "),t.qZA(),t.TgZ(17,"button",12),t._uU(18," \u0625\u0631\u0633\u0627\u0644 "),t.qZA()()()),2&n&&(t.Q6J("formGroup",o.form),t.xp6(5),t.Q6J("ngIf",o.userService.userData.user_type==o.UserType.provider),t.xp6(12),t.Q6J("disabled",o.isSaving))},dependencies:[l.sg,l.O5,h.lW,u._Y,u.Fj,u.JJ,u.JL,u.sg,u.u,c.ZT,c.uh,c.xY,c.H8,F.hL,F.J5,Z.VQ,Z.U0,T.XC,T.ZL,P.ey],styles:[".col-md-6[_ngcontent-%COMP%], .col-md-12[_ngcontent-%COMP%]{margin-bottom:1rem}.col-md-6[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], .col-md-12[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:18px;margin-bottom:10px}.col-md-6[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .col-md-12[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;color:var(--main-color)}"]}),e})();function V(e,a){1&e&&(t.TgZ(0,"p"),t._uU(1," \u0645\u062f\u064a\u0631 "),t.qZA())}function G(e,a){if(1&e&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&e){const n=t.oxw(2);t.xp6(1),t.hij(" ",null==n.data?null:n.data.sender.name," ")}}function q(e,a){if(1&e&&(t.TgZ(0,"div")(1,"h4"),t._uU(2," \u0627\u0644\u0645\u0631\u0633\u0644 "),t.qZA(),t.YNc(3,V,2,0,"p",8),t.YNc(4,G,2,1,"ng-template",null,9,t.W1O),t.qZA()),2&e){const n=t.MAs(5),o=t.oxw();t.xp6(3),t.Q6J("ngIf","provider"==o.data.sender.user_type)("ngIfElse",n)}}function D(e,a){1&e&&(t.TgZ(0,"p"),t._uU(1," \u0645\u062f\u064a\u0631 "),t.qZA())}function H(e,a){if(1&e&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&e){const n=t.oxw(2);t.xp6(1),t.hij(" ",null==n.data?null:n.data.receiver.name," ")}}function L(e,a){if(1&e&&(t.TgZ(0,"div")(1,"h4"),t._uU(2," \u0627\u0644\u0649 "),t.qZA(),t.YNc(3,D,2,0,"p",8),t.YNc(4,H,2,1,"ng-template",null,9,t.W1O),t.qZA()),2&e){const n=t.MAs(5),o=t.oxw();t.xp6(3),t.Q6J("ngIf","provider"==o.data.to_type)("ngIfElse",n)}}let R=(()=>{class e{constructor(){this.FormMode=x.h}ngOnInit(){}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-view-msg"]],inputs:{data:"data",view_type:"view_type",mode:"mode",ref:"ref"},decls:20,vars:4,consts:[["mat-dialog-title",""],[1,"mat-typography"],[1,"row"],[1,"col-md-6"],[4,"ngIf"],[1,"col-md-12"],["align","end",1,"actions"],["mat-button","","mat-dialog-close","","cdkFocusInitial","",1,"cancel"],[4,"ngIf","ngIfElse"],["normal",""]],template:function(n,o){1&n&&(t.TgZ(0,"h2",0),t._uU(1," \u062a\u0641\u0627\u0635\u064a\u0644 \u0627\u0644\u0631\u0633\u0627\u0644\u0629\n"),t.qZA(),t.TgZ(2,"mat-dialog-content",1)(3,"div",2)(4,"div",3),t.YNc(5,q,6,2,"div",4),t.YNc(6,L,6,2,"div",4),t.qZA(),t.TgZ(7,"div",3)(8,"h4"),t._uU(9," \u0639\u0646\u0648\u0627\u0646 \u0627\u0644\u0631\u0633\u0627\u0644\u0629 "),t.qZA(),t.TgZ(10,"p"),t._uU(11),t.qZA()(),t.TgZ(12,"div",5)(13,"h4"),t._uU(14," \u0627\u0644\u0631\u0633\u0627\u0644\u0629 "),t.qZA(),t.TgZ(15,"p"),t._uU(16),t.qZA()()()(),t.TgZ(17,"mat-dialog-actions",6)(18,"button",7),t._uU(19," \u0625\u063a\u0644\u0627\u0642 "),t.qZA()()),2&n&&(t.xp6(5),t.Q6J("ngIf","inbox"==o.view_type),t.xp6(1),t.Q6J("ngIf","sent"==o.view_type),t.xp6(5),t.hij(" ",null==o.data?null:o.data.message_title," "),t.xp6(5),t.hij(" ",null==o.data?null:o.data.message_content," "))},dependencies:[l.O5,h.lW,c.ZT,c.uh,c.xY,c.H8],styles:[".col-md-6[_ngcontent-%COMP%], .col-md-12[_ngcontent-%COMP%]{margin-bottom:1rem}.col-md-6[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], .col-md-12[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:18px;margin-bottom:10px}.col-md-6[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .col-md-12[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;color:var(--main-color)}"]}),e})();const j=["viewMsg"],W=["dialog"],z=["table1"],B=["table2"];function K(e,a){if(1&e&&t._UZ(0,"app-create",13),2&e){const o=a.$implicit;t.Q6J("ref",a.dialogRef)("data",o.data)}}function X(e,a){if(1&e&&t._UZ(0,"app-view-msg",14),2&e){const o=a.$implicit;t.Q6J("ref",a.dialogRef)("data",o.data)("view_type",o.view_type)}}const E=[{path:"list",component:(()=>{class e{constructor(n,o,s,m,_,et){this.matDialog=n,this.themeService=o,this.userService=s,this.apiService=m,this.datePipe=_,this.translateService=et,this.apiFuncSend=(r={})=>this.apiService.get(f.A.messages.sent,r),this.apiFuncInbox=(r={})=>this.apiService.get(f.A.messages.inbox,r),this.settings_inbox={columns:{message_title:{title:"\u0639\u0646\u0648\u0627\u0646 \u0627\u0644\u0631\u0633\u0627\u0644\u0629",type:d.Jm.Text,filter:!1},message_content:{title:"\u0645\u062d\u062a\u0648\u0649 \u0627\u0644\u0631\u0633\u0627\u0644\u0629",type:d.Jm.Text,filter:!1},created_at:{title:"\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0625\u0631\u0633\u0627\u0644",type:d.Jm.Text,valuePrepareFunction:(r,nt)=>this.datePipe.transform(r,"yyyy/MM/dd"),filter:!1},actions:{title:this.translateService.instant("Options"),type:d.Jm.Custom,classContent:"options-cell",classHeader:"options-cell",renderComponent:M,sort:!1,filter:!1,onComponentInitFunction:r=>{r.parent=this,r.view_type="inbox"}}}},this.settings_sent={columns:{message_title:{title:"\u0639\u0646\u0648\u0627\u0646 \u0627\u0644\u0631\u0633\u0627\u0644\u0629",type:d.Jm.Text,filter:!1},message_content:{title:"\u0645\u062d\u062a\u0648\u0649 \u0627\u0644\u0631\u0633\u0627\u0644\u0629",type:d.Jm.Text,filter:!1},created_at:{title:"\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0625\u0631\u0633\u0627\u0644",type:d.Jm.Text,valuePrepareFunction:(r,nt)=>this.datePipe.transform(r,"yyyy/MM/dd"),filter:!1},actions:{title:this.translateService.instant("Options"),type:d.Jm.Custom,classContent:"options-cell",classHeader:"options-cell",renderComponent:M,sort:!1,filter:!1,onComponentInitFunction:r=>{r.parent=this,r.view_type="sent"}}}}}ngOnInit(){}openDialog(n,o=null,s=""){this.matDialog.open(n,{data:{data:o,view_type:s}}).afterClosed().subscribe(_=>{_&&(this.table1.reloadTable(),this.table2.reloadTable())})}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(c.uw),t.Y36(O.f),t.Y36(A.K),t.Y36(b.s),t.Y36(l.uU),t.Y36(S.sK))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-list"]],viewQuery:function(n,o){if(1&n&&(t.Gf(j,5),t.Gf(W,5),t.Gf(z,5),t.Gf(B,5)),2&n){let s;t.iGM(s=t.CRH())&&(o.viewMsg=s.first),t.iGM(s=t.CRH())&&(o.dialog=s.first),t.iGM(s=t.CRH())&&(o.table1=s.first),t.iGM(s=t.CRH())&&(o.table2=s.first)}},features:[t._Bn([l.uU])],decls:23,vars:4,consts:[[1,"card-cont"],[1,"d-flex","align-items-center","justify-content-between"],["mat-raised-button","",1,"add-btn",3,"click"],["mat-align-tabs","center"],["label","\u0627\u0644\u0645\u0631\u0633\u0644\u0629"],[1,"mt-5"],["paginationId","send",3,"settings","apiFunc"],["table1",""],["label","\u0627\u0644\u0648\u0627\u0631\u062f\u0629"],["paginationId","inbox",3,"settings","apiFunc"],["table2",""],["dialog",""],["viewMsg",""],[3,"ref","data"],[3,"ref","data","view_type"]],template:function(n,o){if(1&n){const s=t.EpF();t.TgZ(0,"section",0)(1,"h2"),t._uU(2," \u0627\u0644\u0631\u0633\u0627\u0626\u0644 "),t.qZA(),t.TgZ(3,"mat-card")(4,"mat-card-header")(5,"div",1),t._UZ(6,"div"),t.TgZ(7,"button",2),t.NdJ("click",function(){t.CHM(s);const _=t.MAs(20);return t.KtG(o.openDialog(_))}),t._uU(8," \u0625\u0631\u0633\u0627\u0644 \u0631\u0633\u0627\u0644\u0629 "),t.qZA()()(),t.TgZ(9,"mat-card-content")(10,"mat-tab-group",3)(11,"mat-tab",4),t._UZ(12,"div",5)(13,"app-table",6,7),t.qZA(),t.TgZ(15,"mat-tab",8),t._UZ(16,"div",5)(17,"app-table",9,10),t.qZA()()()()(),t.YNc(19,K,1,2,"ng-template",null,11,t.W1O),t.YNc(21,X,1,3,"ng-template",null,12,t.W1O)}2&n&&(t.xp6(13),t.Q6J("settings",o.settings_sent)("apiFunc",o.apiFuncSend),t.xp6(4),t.Q6J("settings",o.settings_inbox)("apiFunc",o.apiFuncInbox))},dependencies:[w.a,C.a8,C.dk,C.dn,h.lW,y.SP,y.uX,Y,R],styles:[".card-cont[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{padding-top:1rem;padding-bottom:1rem}"]}),e})()},{path:"",redirectTo:"list",pathMatch:"full"}];let $=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[g.Bz.forChild(E),g.Bz]}),e})();var k=i(5754);let tt=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[l.ez,$,k.m,y.Nh,Z.Fk,T.Bb]}),e})()},4763:(U,v,i)=>{i.d(v,{h:()=>l});var l=(()=>{return(g=l||(l={})).Create="Create",g.Update="Update",g.View="View",g.Delete="Delete",l;var g})()}}]);