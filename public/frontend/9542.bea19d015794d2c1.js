"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[9542],{9542:(P,f,i)=>{i.r(f),i.d(f,{EmployeesModule:()=>G});var u=i(6895),h=i(9197),p=i(2252),c=i(4763),g=i(1511),t=i(4650),b=i(7392),v=i(4859);function T(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"button",3),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.parent.openResignDialog(a.FormMode.Create,a.rowData))}),t.TgZ(1,"mat-icon",1),t._uU(2," switch_access_shortcut "),t.qZA()()}}let F=(()=>{class o{constructor(){this.FormMode=c.h}ngOnInit(){}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-actions"]],hostAttrs:[1,"list-actions-btns"],decls:4,vars:1,consts:[["mat-button","",3,"click"],["color","primary"],["title","\u0627\u0646\u0647\u0627\u0621 \u062a\u0639\u0627\u0642\u062f","mat-button","",3,"click",4,"ngIf"],["title","\u0627\u0646\u0647\u0627\u0621 \u062a\u0639\u0627\u0642\u062f","mat-button","",3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"button",0),t.NdJ("click",function(){return n.parent.openDialog(n.FormMode.Create,n.rowData)}),t.TgZ(1,"mat-icon",1),t._uU(2," assignment_add "),t.qZA()(),t.YNc(3,T,3,0,"button",2)),2&e&&(t.xp6(3),t.Q6J("ngIf",0==n.rowData.current_resigns_count))},dependencies:[u.O5,b.Hw,v.lW]}),o})();var m=i(5412),y=i(9242),d=i(3416),C=i(2278),S=i(8038),Z=i(3546),D=i(3523),l=i(4006),J=i(8746),M=i(8015),A=i(4115);let R=(()=>{class o{constructor(e,n,a,r){this.apiService=e,this.translateSerivce=n,this.themeService=a,this.userService=r,this.FormMode=c.h,this.firstTime=!1}ngOnInit(){console.log("data"),console.log(this.data),this.form=new l.cw({notes:new l.NI(null)})}save(){if(this.form.invalid)return;this.isSaving=!0;let e=new FormData,n={...this.form.value};e.append("notes",n.notes),e.append("emp_id",this.employeeId),this.apiService.post(g.A.company.resigns,e).pipe((0,J.x)(()=>this.isSaving=!1)).subscribe(a=>{console.log(a),this.themeService.openSnackBar(this.translateSerivce.instant("SavedSuccessfully"),null),this.ref.close(!0)})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(y.s),t.Y36(d.sK),t.Y36(C.f),t.Y36(M.K))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-resign-dialog"]],inputs:{ref:"ref",data:"data",employees:"employees",mode:"mode",employeeId:"employeeId"},decls:28,vars:16,consts:[[3,"formGroup","ngSubmit"],["mat-dialog-title",""],[1,"mat-typography"],[1,"row"],[1,"col-md-6","mb-4","form-group"],["for","amount"],[1,"form-control"],[1,"col-md-12","mb-4","form-group"],["for","notes"],["name","notes","id","notes","cols","15","formControlName","notes",3,"placeholder"],["align","end",1,"actions"],["type","button","mat-button","","mat-dialog-close","",1,"cancel"],["mat-button","","cdkFocusInitial","",1,"save",3,"disabled"]],template:function(e,n){1&e&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return n.save()}),t.TgZ(1,"h2",1),t._uU(2," \u0637\u0644\u0628 \u0627\u0646\u0647\u0627\u0621 \u062a\u0639\u0627\u0642\u062f "),t.qZA(),t.TgZ(3,"mat-dialog-content",2)(4,"div",3)(5,"div",4)(6,"label",5),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"div",6),t._uU(10),t.qZA()(),t.TgZ(11,"div",4)(12,"label",5),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"div",6),t._uU(16),t.qZA()(),t.TgZ(17,"div",7)(18,"label",8),t._uU(19),t.ALo(20,"translate"),t.qZA(),t._UZ(21,"textarea",9),t.ALo(22,"translate"),t.qZA()()(),t.TgZ(23,"mat-dialog-actions",10)(24,"button",11),t._uU(25," \u0631\u062c\u0648\u0639 "),t.qZA(),t.TgZ(26,"button",12),t._uU(27," \u0637\u0644\u0628 \u0627\u0646\u0647\u0627\u0621 \u062a\u0639\u0627\u0642\u062f "),t.qZA()()()),2&e&&(t.Q6J("formGroup",n.form),t.xp6(7),t.hij(" ",t.lcZ(8,8,"\u0627\u0644\u0648\u0638\u064a\u0641\u0629 \u0627\u0644\u062d\u0627\u0644\u064a\u0629 ")," "),t.xp6(3),t.Oqu(n.data.job.job_title),t.xp6(3),t.hij(" ",t.lcZ(14,10," \u0627\u0644\u0634\u0631\u0643\u0629 ")," "),t.xp6(3),t.Oqu(n.data.company.name_ar),t.xp6(3),t.hij(" ",t.lcZ(20,12,"Notes")," "),t.xp6(2),t.Q6J("placeholder",t.lcZ(22,14,"Notes")),t.xp6(5),t.Q6J("disabled",n.isSaving))},dependencies:[v.lW,l._Y,l.Fj,l.JJ,l.JL,l.sg,l.u,m.ZT,m.uh,m.xY,m.H8,A.hL,A.J5,d.X$]}),o})();const j=["dialog"],x=["resignDialog"],I=["table"];function L(o,s){if(1&o&&(t.TgZ(0,"mat-card")(1,"mat-card-content"),t._UZ(2,"app-table",4,5),t.qZA()()),2&o){const e=t.oxw();t.xp6(2),t.Q6J("settings",e.settings)("apiFunc",e.apiFunc)}}function U(o,s){if(1&o&&t._UZ(0,"app-task-dialog",6),2&o){const e=s.dialogRef,n=s.$implicit,a=t.oxw();t.Q6J("employeeId",n.data.id)("ref",e)("mode",a.FormMode.Create)}}function Y(o,s){if(1&o&&t._UZ(0,"app-resign-dialog",7),2&o){const e=s.dialogRef,n=s.$implicit,a=t.oxw();t.Q6J("employeeId",n.data.id)("data",n.data)("ref",e)("mode",a.FormMode.Create)}}const N=[{path:"list",component:(()=>{class o{constructor(e,n,a,r,B){this.matDialog=e,this.apiService=n,this.datePipe=a,this.translateService=r,this.themeService=B,this.FormMode=c.h,this.apiFunc=(H={})=>this.apiService.get(g.A.company.list_employees,H),this.jobs={}}ngOnInit(){this.apiService.get(g.A.employee.jobs).subscribe(e=>{for(let n of e.jobs)this.jobs[n.id]=n;this.settings={columns:{employee:{title:"\u0627\u0644\u0645\u0648\u0638\u0641",type:p.Jm.Text,filter:!0,valuePrepareFunction:(n,a)=>a.name_ar},job_id:{title:"\u0627\u0644\u0648\u0638\u064a\u0641\u0629",type:p.Jm.Text,filter:!0,valuePrepareFunction:(n,a)=>this.jobs[n].job_title},date:{title:"\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u062a\u0639\u0627\u0642\u062f",type:p.Jm.Text,valuePrepareFunction:(n,a)=>this.datePipe.transform(a.pivot.work_start_date,"yyyy/MM/dd")},actions:{title:this.translateService.instant("Options"),type:p.Jm.Custom,renderComponent:F,sort:!1,filter:!1,onComponentInitFunction:(n,a)=>{n.parent=this}}}}})}openDialog(e=c.h.Create,n=null){this.matDialog.open(this.dialog,{data:{data:n,mode:e},width:"80vw"}).afterClosed().subscribe(r=>{r&&this.table.reloadTable()})}openResignDialog(e=c.h.Create,n=null){this.matDialog.open(this.resignDialog,{data:{data:n,mode:e}}).afterClosed().subscribe(r=>{r&&this.table.reloadTable()})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(m.uw),t.Y36(y.s),t.Y36(u.uU),t.Y36(d.sK),t.Y36(C.f))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-list"]],viewQuery:function(e,n){if(1&e&&(t.Gf(j,5),t.Gf(x,5),t.Gf(I,5)),2&e){let a;t.iGM(a=t.CRH())&&(n.dialog=a.first),t.iGM(a=t.CRH())&&(n.resignDialog=a.first),t.iGM(a=t.CRH())&&(n.table=a.first)}},features:[t._Bn([u.uU])],decls:9,vars:4,consts:[[1,"card-cont"],[4,"ngIf"],["dialog",""],["resignDialog",""],[3,"settings","apiFunc"],["table",""],[3,"employeeId","ref","mode"],[3,"employeeId","data","ref","mode"]],template:function(e,n){1&e&&(t.TgZ(0,"section",0)(1,"h2"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.YNc(4,L,4,2,"mat-card",1),t.qZA(),t.YNc(5,U,1,3,"ng-template",null,2,t.W1O),t.YNc(7,Y,1,4,"ng-template",null,3,t.W1O)),2&e&&(t.xp6(2),t.hij(" ",t.lcZ(3,2,"Employees")," "),t.xp6(2),t.Q6J("ngIf",n.settings))},dependencies:[u.O5,S.a,Z.a8,Z.dn,D.S,R,d.X$]}),o})()},{path:"",redirectTo:"list",pathMatch:"full"}];let O=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[h.Bz.forChild(N),h.Bz]}),o})();var Q=i(5754),E=i(5605);let G=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[u.ez,O,Q.m,E.L]}),o})()}}]);