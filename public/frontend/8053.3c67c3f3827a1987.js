"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[8053],{8053:(X,A,s)=>{s.r(A),s.d(A,{JobNominationsModule:()=>q});var l=s(6895),T=s(9197),m=s(2252),g=s(1511),t=s(4650),f=s(2278),C=s(7392),h=s(4859);function Z(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"button",0),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.parent.openDialog(o.rowData,o.parent.dialog2))}),t.TgZ(1,"mat-icon",3),t._uU(2," file_present "),t.qZA()()}}let E=(()=>{class n{constructor(e){this.themeService=e}ngOnInit(){this.showAttach=this.rowData.pivot.company_response_status==this.themeService.settings.COMPANY_REPONSE_STATUS.enum.accepted&&this.rowData.pivot.emp_response_status==this.themeService.settings.EMPLOYEE_REPONSE_STATUS.enum.accepted}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(f.f))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-actions"]],hostAttrs:[1,"list-actions-btns"],decls:4,vars:1,consts:[["mat-button","",3,"click"],[1,"eye"],["mat-button","",3,"click",4,"ngIf"],["color","primary"]],template:function(e,i){1&e&&(t.TgZ(0,"button",0),t.NdJ("click",function(){return i.parent.openDialog(i.rowData,i.parent.dialog)}),t.TgZ(1,"mat-icon",1),t._uU(2,"visibility"),t.qZA()(),t.YNc(3,Z,3,0,"button",2)),2&e&&(t.xp6(3),t.Q6J("ngIf",i.showAttach))},dependencies:[l.O5,C.Hw,h.lW]}),n})();var v=s(7331),d=s(3416);function P(n,a){if(1&n&&(t.TgZ(0,"mat-chip-list")(1,"mat-chip"),t._uU(2),t.ALo(3,"translate"),t.qZA()()),2&n){const e=t.oxw();t.xp6(1),t.Tol(e.statusEnum[e.value]),t.xp6(1),t.hij(" ",t.lcZ(3,3,e.statusEnum[e.value])," ")}}let J=(()=>{class n{constructor(e){this.themeService=e}ngOnInit(){this.statusEnum=this.themeService.settings.COMPANY_REPONSE_STATUS.enum}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(f.f))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-company-status"]],hostAttrs:[1,"status"],decls:1,vars:1,consts:[[4,"ngIf"]],template:function(e,i){1&e&&t.YNc(0,P,4,5,"mat-chip-list",0),2&e&&t.Q6J("ngIf",i.value)},dependencies:[l.O5,v.qn,v.HS,d.X$]}),n})();var u=s(5412),_=s(9242),O=s(8038),b=s(3546),U=s(8746);function N(n,a){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",9),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.takeAction(null==o.themeService.settings||null==o.themeService.settings.EMPLOYEE_REPONSE_STATUS||null==o.themeService.settings.EMPLOYEE_REPONSE_STATUS.enum?null:o.themeService.settings.EMPLOYEE_REPONSE_STATUS.enum.rejected))}),t._uU(2," \u0631\u0641\u0636 \u0627\u0644\u0639\u0631\u0636 "),t.qZA(),t.TgZ(3,"button",10),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.takeAction(null==o.themeService.settings||null==o.themeService.settings.EMPLOYEE_REPONSE_STATUS||null==o.themeService.settings.EMPLOYEE_REPONSE_STATUS.enum?null:o.themeService.settings.EMPLOYEE_REPONSE_STATUS.enum.accepted))}),t._uU(4," \u0642\u0628\u0648\u0644 \u0627\u0644\u0639\u0631\u0636 "),t.qZA(),t.BQk()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("disabled",e.isSaving),t.xp6(2),t.Q6J("disabled",e.isSaving)}}let F=(()=>{class n{constructor(e,i){this.apiService=e,this.themeService=i,this.isSaving=!1}takeAction(e){this.isSaving=!0,this.apiService.post(g.A.employee.accept_nomination,{nomination_id:this.data.pivot.id,response:e}).pipe((0,U.x)(()=>this.isSaving=!1)).subscribe(i=>{this.ref.close(!0)})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(_.s),t.Y36(f.f))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-job-preview"]],hostAttrs:[1,"app-dialog"],inputs:{data:"data",ref:"ref"},decls:30,vars:11,consts:[["mat-dialog-title",""],[1,"mat-typography"],[1,"row"],[1,"col-md-4","mb-4"],["for",""],[1,"col-md-12","mb-4"],["align","end",1,"actions"],["type","button","mat-button","","mat-dialog-close",""],[4,"ngIf"],["type","button","mat-button","",1,"cancel",3,"disabled","click"],["mat-button","","cdkFocusInitial","",1,"save",3,"disabled","click"]],template:function(e,i){1&e&&(t.TgZ(0,"h2",0),t._uU(1," \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0648\u0638\u064a\u0641\u0629\n"),t.qZA(),t.TgZ(2,"mat-dialog-content",1)(3,"div",2)(4,"div",3)(5,"label",4),t._uU(6," \u0639\u0646\u0648\u0627\u0646 \u0627\u0644\u0648\u0638\u064a\u0641\u0629 "),t.qZA(),t.TgZ(7,"p"),t._uU(8),t.qZA()(),t.TgZ(9,"div",3)(10,"label",4),t._uU(11," \u0627\u0633\u0645 \u0627\u0644\u0634\u0631\u0643\u0629 "),t.qZA(),t.TgZ(12,"p"),t._uU(13),t.qZA()(),t.TgZ(14,"div",3)(15,"label",4),t._uU(16," \u062a\u0627\u0631\u064a\u062e \u0627\u0644\u062a\u0631\u0634\u064a\u062d "),t.qZA(),t.TgZ(17,"p"),t._uU(18),t.ALo(19,"date"),t.qZA()(),t.TgZ(20,"div",5)(21,"label",4),t._uU(22," \u0627\u0644\u062a\u0641\u0627\u0635\u064a\u0644 "),t.qZA(),t.TgZ(23,"p"),t._uU(24),t.qZA()()()(),t.TgZ(25,"mat-dialog-actions",6)(26,"button",7),t._uU(27),t.ALo(28,"translate"),t.qZA(),t.YNc(29,N,5,2,"ng-container",8),t.qZA()),2&e&&(t.xp6(8),t.hij(" ",i.data.job.job_title," "),t.xp6(5),t.hij(" ",i.data.company.name_ar," "),t.xp6(5),t.hij(" ",t.xi3(19,6,i.data.job.created_at,"yyyy/MM/dd")," "),t.xp6(6),t.hij(" ",i.data.job.job_description," "),t.xp6(3),t.hij(" ",t.lcZ(28,9,"Back")," "),t.xp6(2),t.Q6J("ngIf",null==i.data.pivot.emp_response_status||i.data.pivot.emp_response_status==(null==i.themeService.settings||null==i.themeService.settings.EMPLOYEE_REPONSE_STATUS||null==i.themeService.settings.EMPLOYEE_REPONSE_STATUS.enum?null:i.themeService.settings.EMPLOYEE_REPONSE_STATUS.enum.pending)))},dependencies:[l.O5,h.lW,u.ZT,u.uh,u.xY,u.H8,l.uU,d.X$],styles:[".cancel[_ngcontent-%COMP%]{color:#d33;border-color:#d33}label[_ngcontent-%COMP%]{color:#979797}p[_ngcontent-%COMP%]{color:var(--main-color);margin-bottom:0;margin-top:5px}"]}),n})();var M=s(529),r=s(4006),Y=s(1679),x=s(4115),y=s(1572);function I(n,a){1&n&&t._UZ(0,"mat-spinner",11)}function L(n,a){if(1&n&&(t.ynx(0),t._UZ(1,"span",7),t.TgZ(2,"div",8),t.YNc(3,I,1,0,"mat-spinner",9),t.TgZ(4,"button",10),t._uU(5),t.ALo(6,"translate"),t.qZA()(),t.BQk()),2&n){const e=t.oxw();t.xp6(3),t.Q6J("ngIf",e.isSaving),t.xp6(1),t.Q6J("disabled",e.isSaving),t.xp6(1),t.hij(" ",e.isSaving?e.progress+"%":t.lcZ(6,3,"Save")," ")}}let j=(()=>{class n{constructor(e,i,o){this.apiService=e,this.themeService=i,this.translateSerivce=o}ngOnInit(){this.attachForm=new r.cw({job_request_id:new r.NI(this.data.pivot.job_request_id),emp_file:new r.NI(null,r.kI.required)}),this.data.insurance?.emp_file_url&&(this.attachForm.controls.emp_file.patchValue(this.data.insurance?.emp_file_url),this.attachForm.controls.emp_file.disable())}saveFile(){if(this.attachForm.invalid)return;this.isSaving=!0;let e=new FormData,i={...this.attachForm.value};e.append("job_request_id",i.job_request_id),e.append("emp_id",i.emp_id),i.emp_file instanceof File?e.append("emp_file",i.emp_file,i.emp_file.name):e.append("emp_file",i.emp_file),this.progress=0,this.apiService.uploadFiles(g.A.employee.attach_insurance_file,e,"POST").subscribe(o=>{1==o.type&&(this.progress=(o.loaded/o.total*100).toFixed(0)),o instanceof M.Zn&&(this.isSaving=!1,this.themeService.openSnackBar(this.translateSerivce.instant("SavedSuccessfully"),null),this.ref.close(!0))},o=>this.isSaving=!1)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(_.s),t.Y36(f.f),t.Y36(d.sK))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-apply-insurance"]],inputs:{data:"data",ref:"ref"},decls:14,vars:6,consts:[[3,"formGroup","ngSubmit"],["matDialogTitle",""],[1,"mb-4","file-item"],[3,"control"],["align","end",1,"actions"],["mat-button","","matDialogClose","","type","button",3,"click"],[4,"ngIf"],[2,"width","40px"],[1,"d-flex","align-items-center"],["diameter","36","strokeWidth","3",4,"ngIf"],["mat-button","","type","submit",1,"primary",3,"disabled"],["diameter","36","strokeWidth","3"]],template:function(e,i){1&e&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return i.saveFile()}),t.TgZ(1,"h2",1),t._uU(2," \u0634\u0647\u0627\u062f\u0629 \u0627\u0644\u062a\u0623\u0645\u064a\u0646\u0627\u062a "),t.qZA(),t.TgZ(3,"mat-dialog-content")(4,"div",2)(5,"div")(6,"h3"),t._uU(7," \u0645\u0644\u0641 \u0627\u0644\u062a\u0623\u0645\u064a\u0646\u0627\u062a * "),t.qZA(),t._UZ(8,"app-file-input",3),t.qZA()()(),t.TgZ(9,"mat-dialog-actions",4)(10,"button",5),t.NdJ("click",function(){return i.attachForm.reset()}),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.YNc(13,L,7,5,"ng-container",6),t.qZA()()),2&e&&(t.Q6J("formGroup",i.attachForm),t.xp6(8),t.Q6J("control",i.attachForm.controls.emp_file),t.xp6(3),t.hij(" ",t.lcZ(12,4,"Back")," "),t.xp6(2),t.Q6J("ngIf",!i.attachForm.controls.emp_file.disabled))},dependencies:[l.O5,Y.Y,h.lW,r._Y,r.JL,r.sg,u.ZT,u.uh,u.xY,u.H8,x.hL,y.Ou,d.X$],styles:["mat-dialog-content[_ngcontent-%COMP%]{min-width:500px;min-height:150px}"]}),n})();const R=["dialog"],w=["dialog2"],Q=["table"];function D(n,a){if(1&n&&t._UZ(0,"app-job-preview",5),2&n){const i=a.$implicit;t.Q6J("ref",a.dialogRef)("data",i.data)}}function G(n,a){if(1&n&&t._UZ(0,"app-apply-insurance",5),2&n){const i=a.$implicit;t.Q6J("ref",a.dialogRef)("data",i.data)}}const H=[{path:"",component:(()=>{class n{constructor(e,i,o,S){this.matDialog=e,this.apiService=i,this.translateService=o,this.datePipe=S,this.apiFunc=(c={})=>this.apiService.get(g.A.employee.nominations,c),this.settings={columns:{name:{title:"\u0639\u0646\u0648\u0627\u0646 \u0627\u0644\u0648\u0638\u064a\u0641\u0629",type:m.Jm.Text,filter:!0,valuePrepareFunction:(c,p)=>p.job.job_title},period:{title:"\u0627\u0633\u0645 \u0627\u0644\u0634\u0631\u0643\u0629",type:m.Jm.Text,valuePrepareFunction:(c,p)=>p.company.name_ar},created_at:{title:"\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0627\u0636\u0627\u0641\u0629",type:m.Jm.Text,valuePrepareFunction:(c,p)=>this.datePipe.transform(c,"yyyy/MM/dd")},comp_status:{title:"\u0631\u062f \u0627\u0644\u0634\u0631\u0643\u0629",type:m.Jm.Custom,renderComponent:J,sort:!1,filter:!1,valuePrepareFunction:(c,p)=>p.pivot.company_response_status},actions:{title:this.translateService.instant("Options"),type:m.Jm.Custom,renderComponent:E,sort:!1,filter:!1,onComponentInitFunction:c=>{c.parent=this}}}}}ngOnInit(){}openDialog(e=null,i){this.matDialog.open(i,{data:{data:e}}).afterClosed().subscribe(S=>{S&&this.table.reloadTable()})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(u.uw),t.Y36(_.s),t.Y36(d.sK),t.Y36(l.uU))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-list"]],viewQuery:function(e,i){if(1&e&&(t.Gf(R,5),t.Gf(w,5),t.Gf(Q,5)),2&e){let o;t.iGM(o=t.CRH())&&(i.dialog=o.first),t.iGM(o=t.CRH())&&(i.dialog2=o.first),t.iGM(o=t.CRH())&&(i.table=o.first)}},features:[t._Bn([l.uU])],decls:11,vars:2,consts:[[1,"card-cont"],[3,"settings","apiFunc"],["table",""],["dialog",""],["dialog2",""],[3,"ref","data"]],template:function(e,i){1&e&&(t.TgZ(0,"section",0)(1,"h2"),t._uU(2," \u062a\u0631\u0634\u064a\u062d\u0627\u062a \u0627\u0644\u0648\u0638\u0627\u0626\u0641 "),t.qZA(),t.TgZ(3,"mat-card")(4,"mat-card-content"),t._UZ(5,"app-table",1,2),t.qZA()()(),t.YNc(7,D,1,2,"ng-template",null,3,t.W1O),t.YNc(9,G,1,2,"ng-template",null,4,t.W1O)),2&e&&(t.xp6(5),t.Q6J("settings",i.settings)("apiFunc",i.apiFunc))},dependencies:[O.a,b.a8,b.dn,F,j]}),n})()},{path:"",redirectTo:"list",pathMatch:"full"}];let B=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[T.Bz.forChild(H),T.Bz]}),n})();var k=s(5754);let q=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[l.ez,B,k.m,v.Hi,y.Cq]}),n})()}}]);