"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[3873],{3873:(Z,h,i)=>{i.r(h),i.d(h,{JobsModule:()=>X});var l=i(6895),o=i(9197),m=i(2252),b=i(8674),d=i(9134),_=i(4763),u=i(1511),t=i(4650),g=i(9807),p=i(7392),T=i(4859);function O(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"button",0),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.parent.openDialog(r.FormMode.Update,r.rowData))}),t.TgZ(1,"mat-icon",3),t._uU(2,"edit"),t.qZA()()}}function E(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"button",0),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.parent.popDelete(r.rowData))}),t.TgZ(1,"mat-icon",4),t._uU(2," delete "),t.qZA()()}}let L=(()=>{class n{constructor(){this.FormMode=_.h}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-actions"]],hostAttrs:[1,"list-actions-btns"],decls:5,vars:2,consts:[["mat-button","",3,"click"],[1,"assign"],["mat-button","",3,"click",4,"appPerm"],["color","primary"],["color","warn"]],template:function(e,a){1&e&&(t.TgZ(0,"button",0),t.NdJ("click",function(){return a.parent.assignTask(a.rowData)}),t.TgZ(1,"mat-icon",1),t._uU(2,"assignment"),t.qZA()(),t.YNc(3,O,3,0,"button",2),t.YNc(4,E,3,0,"button",2)),2&e&&(t.xp6(3),t.Q6J("appPerm","edit_job"),t.xp6(1),t.Q6J("appPerm","delete_job"))},dependencies:[g.$,p.Hw,T.lW],styles:[".assign[_ngcontent-%COMP%]{color:#009688}"]}),n})();var f=i(5412),D=i(9242),C=i(3416),S=i(2278),j=i(8038),J=i(3546),c=i(4006),M=i(8746),x=i(8796),A=i(4115);function I(n,s){if(1&n&&(t.TgZ(0,"button",15),t._uU(1," \u062d\u0641\u0638 "),t.qZA()),2&n){const e=t.oxw();t.Q6J("disabled",e.isSaving)}}let P=(()=>{class n{constructor(e,a){this.apiService=e,this.themeService=a,this.isSaving=!1}ngOnInit(){this.form=new c.cw({job_title:new c.NI(null,c.kI.required),job_description:new c.NI(null),id:new c.NI(null),status:new c.NI(null)}),this.data&&this.form.patchValue(this.data),this.statusEnum=this.themeService.settings.JOB_STATUS.enum}save(){console.log(this.form),!this.form.invalid&&(this.data?this.apiService.put(u.A.provider.jobs+"/"+this.data.id,this.form.value):this.apiService.post(u.A.provider.jobs,this.form.value)).pipe((0,M.x)(()=>this.isSaving=!1)).subscribe(e=>{this.themeService.openSnackBar("SavedSuccessfully",null),this.ref.close(!0)})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(D.s),t.Y36(S.f))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-create"]],inputs:{ref:"ref",data:"data",mode:"mode"},decls:30,vars:19,consts:[[3,"formGroup","ngSubmit"],["mat-dialog-title",""],[1,"mat-typography"],[1,"row"],[1,"col-md-12","form-group","mb-4"],["for","job_title"],["id","job_title","type","text","formControlName","job_title"],["for","job_description"],["appendTo","body","formControlName","status"],[3,"value"],[1,"col-md-12","form-group"],["name","job_description","formControlName","job_description"],["align","end",1,"actions"],["type","button","mat-button","","mat-dialog-close","",1,"cancel"],["mat-button","","cdkFocusInitial","","class","save",3,"disabled",4,"ngIf"],["mat-button","","cdkFocusInitial","",1,"save",3,"disabled"]],template:function(e,a){1&e&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return a.save()}),t.TgZ(1,"h2",1),t._uU(2),t.ALo(3,"translate"),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"mat-dialog-content",2)(6,"div",3)(7,"div",4)(8,"label",5),t._uU(9," \u0627\u0633\u0645 \u0627\u0644\u0648\u0638\u064a\u0641\u0629 "),t.qZA(),t._UZ(10,"input",6),t.qZA(),t.TgZ(11,"div",4)(12,"label",7),t._uU(13," \u062d\u0627\u0644\u0629 \u0627\u0644\u0648\u0638\u064a\u0641\u0629 "),t.qZA(),t.TgZ(14,"ng-select",8)(15,"ng-option",9),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.TgZ(18,"ng-option",9),t._uU(19),t.ALo(20,"translate"),t.qZA()()(),t.TgZ(21,"div",10)(22,"label",7),t._uU(23," \u0648\u0635\u0641 \u0627\u0644\u0648\u0638\u064a\u0641\u0629 "),t.qZA(),t._UZ(24,"textarea",11),t.qZA()()(),t.TgZ(25,"mat-dialog-actions",12)(26,"button",13),t._uU(27),t.ALo(28,"translate"),t.qZA(),t.YNc(29,I,2,1,"button",14),t.qZA()()),2&e&&(t.Q6J("formGroup",a.form),t.xp6(2),t.AsE(" ",t.lcZ(3,9,a.mode)," ",t.lcZ(4,11,"_Job")," "),t.xp6(13),t.Q6J("value",a.statusEnum.active),t.xp6(1),t.hij(" ",t.lcZ(17,13,"active")," "),t.xp6(2),t.Q6J("value",a.statusEnum.inActive),t.xp6(1),t.hij(" ",t.lcZ(20,15,"inActive")," "),t.xp6(8),t.hij(" ",t.lcZ(28,17,"Back")," "),t.xp6(2),t.Q6J("ngIf",!a.form.disabled))},dependencies:[l.O5,T.lW,x.w9,x.jq,c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u,f.ZT,f.uh,f.xY,f.H8,A.hL,A.J5,C.X$]}),n})();var y=i(6338);function F(n,s){if(1&n&&(t.TgZ(0,"mat-list-option",8),t._uU(1),t.qZA()),2&n){const e=s.$implicit;t.Q6J("value",e.id),t.xp6(1),t.hij(" ",e.task_title," ")}}function k(n,s){if(1&n&&(t.TgZ(0,"button",9),t._uU(1," \u062d\u0641\u0638 "),t.qZA()),2&n){const e=t.oxw();t.Q6J("disabled",e.isSaving)}}let N=(()=>{class n{constructor(e,a){this.apiService=e,this.themeService=a,this.isSaving=!1}ngOnInit(){this.form=new c.cw({job_id:new c.NI(this.data.id),tasks:new c.NI(null)}),console.log(this.data),this.data&&this.form.controls.tasks.setValue((this.data.tasks||[]).map(e=>e.id)),this.apiService.get(u.A.provider.tasks,{limit:!1}).subscribe(e=>{this.tasks=e.data})}save(){if(console.log(this.form),this.form.invalid)return;let e={...this.form.value};e.tasks=e.tasks.map(String),this.apiService.post(u.A.provider.assign_tasks,e).pipe((0,M.x)(()=>this.isSaving=!1)).subscribe(a=>{this.themeService.openSnackBar("SavedSuccessfully",null),this.ref.close(!0)})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(D.s),t.Y36(S.f))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-assign-task"]],inputs:{data:"data",ref:"ref"},decls:13,vars:7,consts:[[3,"formGroup","ngSubmit"],["mat-dialog-title",""],[1,"mat-typography"],["formControlName","tasks"],["color","primary",3,"value",4,"ngFor","ngForOf"],["align","end",1,"actions"],["type","button","mat-button","","mat-dialog-close","",1,"cancel"],["mat-button","","cdkFocusInitial","","class","save",3,"disabled",4,"ngIf"],["color","primary",3,"value"],["mat-button","","cdkFocusInitial","",1,"save",3,"disabled"]],template:function(e,a){1&e&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return a.save()}),t.TgZ(1,"h2",1),t._uU(2),t.qZA(),t.TgZ(3,"mat-dialog-content",2)(4,"h3"),t._uU(5," \u0627\u0644\u0645\u0647\u0627\u0645 "),t.qZA(),t.TgZ(6,"mat-selection-list",3),t.YNc(7,F,2,2,"mat-list-option",4),t.qZA()(),t.TgZ(8,"mat-dialog-actions",5)(9,"button",6),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.YNc(12,k,2,1,"button",7),t.qZA()()),2&e&&(t.Q6J("formGroup",a.form),t.xp6(2),t.hij(" \u0625\u0636\u0627\u0641\u0629 \u0645\u0647\u0627\u0645 \u0639\u0644\u0649 \u0648\u0638\u064a\u0641\u0629 ",a.data.job_title," "),t.xp6(5),t.Q6J("ngForOf",a.tasks),t.xp6(3),t.hij(" ",t.lcZ(11,5,"Back")," "),t.xp6(2),t.Q6J("ngIf",!a.form.disabled))},dependencies:[l.sg,l.O5,T.lW,c._Y,c.JJ,c.JL,c.sg,c.u,f.ZT,f.uh,f.xY,f.H8,A.hL,A.J5,y.Ub,y.vS,C.X$],styles:["[_nghost-%COMP%]{display:block;min-width:60vw}h3[_ngcontent-%COMP%]{margin-bottom:0;font-size:18px;color:var(--label-color)}mat-selection-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}mat-selection-list[_ngcontent-%COMP%]     mat-list-option{width:50%!important;min-width:175px}mat-selection-list[_ngcontent-%COMP%]     mat-list-option .mat-list-item-content{flex-direction:row!important}mat-selection-list[_ngcontent-%COMP%]     mat-list-option .mat-list-item-content mat-pseudo-checkbox{margin-left:8px;margin-right:8px}"]}),n})();const Y=["dialog"],B=["assignDialog"],w=["table"];function R(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"mat-card-header")(1,"div",6),t._UZ(2,"div"),t.TgZ(3,"button",7),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.openDialog())}),t.TgZ(4,"mat-icon"),t._uU(5,"add"),t.qZA(),t._uU(6),t.ALo(7,"translate"),t.ALo(8,"translate"),t.qZA()()()}2&n&&(t.xp6(6),t.AsE(" ",t.lcZ(7,2,"Create")," ",t.lcZ(8,4,"_Job")," "))}function Q(n,s){if(1&n&&t._UZ(0,"app-create",8),2&n){const a=s.$implicit;t.Q6J("ref",s.dialogRef)("data",a.data)("mode",a.mode)}}function W(n,s){if(1&n&&t._UZ(0,"app-assign-task",9),2&n){const e=s.dialogRef;t.Q6J("data",s.$implicit.data)("ref",e)}}const G=[{path:"list",component:(()=>{class n{constructor(e,a,r,U,$){this.matDialog=e,this.apiService=a,this.translateService=r,this.datePipe=U,this.themeService=$,this.apiFunc=(v={})=>this.apiService.get(u.A.provider.jobs,v),this.settings={columns:{job_title:{title:"\u0639\u0646\u0648\u0627\u0646 \u0627\u0644\u0648\u0638\u064a\u0641\u0629",type:m.Jm.Text,filter:!0},employees_count:{title:" \u0639\u062f\u062f \u0627\u0644\u0645\u0648\u0638\u0641\u064a\u0646 ",type:m.Jm.Text,filter:!0},created_at:{title:"\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0627\u0636\u0627\u0641\u0629",type:m.Jm.Text,valuePrepareFunction:(v,V)=>this.datePipe.transform(v,"yyyy/MM/dd")},status:{title:"\u0627\u0644\u062d\u0627\u0644\u0629",type:m.Jm.Custom,renderComponent:d.p,onComponentInitFunction:v=>{v.statusEnum=this.themeService.settings.JOB_STATUS.enum}},actions:{title:this.translateService.instant("Options"),type:m.Jm.Custom,renderComponent:L,sort:!1,filter:!1,onComponentInitFunction:v=>v.parent=this}}}}ngOnInit(){}openDialog(e=_.h.Create,a=null){this.matDialog.open(this.dialog,{data:{data:a,mode:e}}).afterClosed().subscribe(U=>{U&&this.table.reloadTable()})}popDelete(e){this.rowToDelete=e.id;let a=this.matDialog.open(b.F,{data:{parent:this}});a.componentInstance.header="DeleteJobTitle",a.componentInstance.body="DeleteJobMSG"}delete(){this.apiService.delete(u.A.provider.jobs+"/"+this.rowToDelete).subscribe(e=>{this.themeService.openSnackBar("DeleteSuccessMSG",null),this.table.reloadTable()})}assignTask(e){this.matDialog.open(this.assignDialog,{data:{data:e}}).afterClosed().subscribe(r=>{r&&this.table.reloadTable()})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(f.uw),t.Y36(D.s),t.Y36(C.sK),t.Y36(l.uU),t.Y36(S.f))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-list"]],viewQuery:function(e,a){if(1&e&&(t.Gf(Y,5),t.Gf(B,5),t.Gf(w,5)),2&e){let r;t.iGM(r=t.CRH())&&(a.dialog=r.first),t.iGM(r=t.CRH())&&(a.assignDialog=r.first),t.iGM(r=t.CRH())&&(a.table=r.first)}},features:[t._Bn([l.uU])],decls:13,vars:6,consts:[[1,"card-cont"],[4,"appPerm"],[3,"settings","apiFunc"],["table",""],["dialog",""],["assignDialog",""],[1,"d-flex","align-items-center","justify-content-between"],["mat-raised-button","",1,"add-btn",3,"click"],[3,"ref","data","mode"],[3,"data","ref"]],template:function(e,a){1&e&&(t.TgZ(0,"section",0)(1,"h2"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"mat-card"),t.YNc(5,R,9,6,"mat-card-header",1),t.TgZ(6,"mat-card-content"),t._UZ(7,"app-table",2,3),t.qZA()()(),t.YNc(9,Q,1,3,"ng-template",null,4,t.W1O),t.YNc(11,W,1,2,"ng-template",null,5,t.W1O)),2&e&&(t.xp6(2),t.hij(" ",t.lcZ(3,4,"Jobs")," "),t.xp6(3),t.Q6J("appPerm","create_job"),t.xp6(2),t.Q6J("settings",a.settings)("apiFunc",a.apiFunc))},dependencies:[j.a,g.$,p.Hw,J.a8,J.dk,J.dn,T.lW,P,N,C.X$]}),n})()},{path:"",redirectTo:"list",pathMatch:"full"}];let H=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[o.Bz.forChild(G),o.Bz]}),n})();var K=i(5754);let X=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[l.ez,H,K.m,y.ie]}),n})()},8674:(Z,h,i)=>{i.d(h,{F:()=>_});var l=i(5412),o=i(4650),m=i(3416),b=i(7392),d=i(4859);let _=(()=>{class u{constructor(g,p){this.translateService=g,this.data=p,this.header="DialogRemoveMessage",this.body="TableDeleteMessage",this.confirmBtn="Delete"}ngOnInit(){console.log(this.data),this.parent=this.data?.parent}}return u.\u0275fac=function(g){return new(g||u)(o.Y36(m.sK),o.Y36(l.WI))},u.\u0275cmp=o.Xpm({type:u,selectors:[["app-delete-dialog"]],decls:16,vars:13,consts:[["mat-dialog-title",""],["color","warn"],["mat-dialog-content",""],["mat-dialog-actions","","align","end"],["mat-button","","mat-dialog-close","","color","warn",3,"mat-dialog-close","click"],["mat-button","","mat-dialog-close","","cdkFocusInitial","","color","primary"]],template:function(g,p){1&g&&(o.TgZ(0,"h2",0)(1,"mat-icon",1),o._uU(2," warning "),o.qZA(),o.TgZ(3,"span"),o._uU(4),o.ALo(5,"translate"),o.qZA()(),o.TgZ(6,"div",2),o._uU(7),o.ALo(8,"translate"),o.qZA(),o.TgZ(9,"div",3)(10,"button",4),o.NdJ("click",function(){return null==p.parent?null:p.parent.delete()}),o._uU(11),o.ALo(12,"translate"),o.qZA(),o.TgZ(13,"button",5),o._uU(14),o.ALo(15,"translate"),o.qZA()()),2&g&&(o.xp6(4),o.hij(" ",o.lcZ(5,5,p.header)," "),o.xp6(3),o.hij(" ",o.lcZ(8,7,p.body),"\n"),o.xp6(3),o.Q6J("mat-dialog-close",!0),o.xp6(1),o.hij(" ",o.lcZ(12,9,p.confirmBtn)," "),o.xp6(3),o.hij(" ",o.lcZ(15,11,"Back")," "))},dependencies:[b.Hw,d.lW,l.ZT,l.uh,l.xY,l.H8,m.X$],styles:["h2[_ngcontent-%COMP%]{display:flex;align-items:center}h2[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:16px;margin-right:16px}"]}),u})()},9134:(Z,h,i)=>{i.d(h,{p:()=>b});var l=i(4650),o=i(7331),m=i(3416);let b=(()=>{class d{ngOnInit(){this._value=this.statusEnum&&this.statusEnum[this.value]?this.statusEnum[this.value]:this.value}}return d.\u0275fac=function(u){return new(u||d)},d.\u0275cmp=l.Xpm({type:d,selectors:[["app-table-status"]],hostAttrs:[1,"status"],inputs:{statusEnum:"statusEnum",value:"value"},decls:4,vars:5,template:function(u,t){1&u&&(l.TgZ(0,"mat-chip-list")(1,"mat-chip"),l._uU(2),l.ALo(3,"translate"),l.qZA()()),2&u&&(l.xp6(1),l.Tol(t._value),l.xp6(1),l.hij(" ",l.lcZ(3,3,t._value)," "))},dependencies:[o.qn,o.HS,m.X$]}),d})()},4763:(Z,h,i)=>{i.d(h,{h:()=>l});var l=(()=>{return(o=l||(l={})).Create="Create",o.Update="Update",o.View="View",o.Delete="Delete",l;var o})()}}]);