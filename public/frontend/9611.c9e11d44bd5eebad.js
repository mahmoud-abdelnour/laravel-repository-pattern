"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[9611],{9611:(P,v,n)=>{n.r(v),n.d(v,{PaymentsModule:()=>j});var e=n(6895),c=n(9197),f=n(2252),h=n(4763),m=n(1511),t=n(4650),g=n(7392),_=n(4859);let x=(()=>{class i{constructor(){this.FormMode=h.h}ngOnInit(){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-actions"]],hostAttrs:[1,"list-actions-btns"],decls:3,vars:0,consts:[["mat-button","",3,"click"],[1,"eye"]],template:function(a,l){1&a&&(t.TgZ(0,"button",0),t.NdJ("click",function(){return l.parent.openDialog(l.rowData,l.FormMode.View)}),t.TgZ(1,"mat-icon",1),t._uU(2,"visibility"),t.qZA()())},dependencies:[g.Hw,_.lW]}),i})();var E=n(9134),C=n(5412),b=n(9242),Z=n(3416),M=n(2278),s=n(8038),p=n(3546),o=n(4006),d=n(529),I=n(1679),A=n(4115);function O(i,r){if(1&i&&(t.TgZ(0,"button",15),t._uU(1),t.qZA()),2&i){const a=t.oxw();t.Q6J("disabled",a.isSaving),t.xp6(1),t.hij(" ",a.mode==a.FormMode.Create?"\u0633\u062f\u0627\u062f":"\u062d\u0641\u0638"," ")}}let F=(()=>{class i{constructor(a,l,u){this.apiService=a,this.translateSerivce=l,this.themeService=u,this.FormMode=h.h,this.isSaving=!1}ngOnInit(){console.log(this.data),this.form=new o.cw({payment_amount:new o.NI(null,o.kI.required),payment_file:new o.NI(null,o.kI.required),notes:new o.NI(null),id:new o.NI(null)}),this.mode!==h.h.Create&&(this.form.patchValue(this.data),this.mode==h.h.View&&this.form.disable())}save(){if(this.form.invalid)return;console.log(this.form.value),this.isSaving=!0;let a=new FormData,l={...this.form.value};a.append("payment_amount",l.payment_amount),a.append("notes",l.notes),a.append("id",l.id),l.payment_file instanceof File?a.append("payment_file",l.payment_file,l.payment_file.name):a.append("payment_file",l.payment_file),this.apiService.uploadFiles(m.A.company.makePayment,a,"POST").subscribe(T=>{T instanceof d.Zn&&(this.isSaving=!1,this.themeService.openSnackBar(this.translateSerivce.instant("SavedSuccessfully"),null),this.ref.close(!0))},T=>this.isSaving=!1)}}return i.\u0275fac=function(a){return new(a||i)(t.Y36(b.s),t.Y36(Z.sK),t.Y36(M.f))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-create"]],hostAttrs:[1,"app-dialog"],inputs:{data:"data",mode:"mode",ref:"ref"},decls:27,vars:21,consts:[[3,"formGroup","ngSubmit"],["mat-dialog-title",""],[1,"mat-typography"],[1,"row"],[1,"col-md-6","mb-4","form-group"],["for","amount"],["type","number","min","1","id","amount","formControlName","payment_amount",3,"placeholder"],[1,"col-md-12","mb-4","form-group"],["for","notes"],["name","notes","id","notes","cols","4","formControlName","notes",3,"placeholder"],[1,"mt-4","mb-4","file-item"],[3,"control"],["align","end",1,"actions"],["type","button","mat-button","","mat-dialog-close","",1,"cancel"],["mat-button","","cdkFocusInitial","","class","save",3,"disabled",4,"ngIf"],["mat-button","","cdkFocusInitial","",1,"save",3,"disabled"]],template:function(a,l){1&a&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return l.save()}),t.TgZ(1,"h2",1),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"mat-dialog-content",2)(5,"div",3)(6,"div",4)(7,"label",5),t._uU(8),t.ALo(9,"translate"),t.qZA(),t._UZ(10,"input",6),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"div",7)(13,"label",8),t._uU(14),t.ALo(15,"translate"),t.qZA(),t._UZ(16,"textarea",9),t.ALo(17,"translate"),t.qZA(),t.TgZ(18,"div",10)(19,"h4"),t._uU(20),t.ALo(21,"translate"),t.qZA(),t._UZ(22,"app-file-input",11),t.qZA()()(),t.TgZ(23,"mat-dialog-actions",12)(24,"button",13),t._uU(25," \u0631\u062c\u0648\u0639 "),t.qZA(),t.YNc(26,O,2,2,"button",14),t.qZA()()),2&a&&(t.Q6J("formGroup",l.form),t.xp6(2),t.hij(" ",t.lcZ(3,9,l.mode)," \u0645\u062f\u0641\u0648\u0639\u0627\u062a "),t.xp6(6),t.hij(" ",t.lcZ(9,11,"\u0627\u0644\u0645\u0628\u0644\u063a")," "),t.xp6(2),t.Q6J("placeholder",t.lcZ(11,13,"\u0627\u0644\u0645\u0628\u0644\u063a")),t.xp6(4),t.hij(" ",t.lcZ(15,15,"Notes")," "),t.xp6(2),t.Q6J("placeholder",t.lcZ(17,17,"Notes")),t.xp6(4),t.hij(" ",t.lcZ(21,19,"\u0625\u064a\u0635\u0627\u0644 \u0627\u0644\u062f\u0641\u0639\u0629")," "),t.xp6(2),t.Q6J("control",l.form.controls.payment_file),t.xp6(4),t.Q6J("ngIf",!l.form.disabled))},dependencies:[e.O5,I.Y,_.lW,o._Y,o.Fj,o.wV,o.JJ,o.JL,o.qQ,o.sg,o.u,C.ZT,C.uh,C.xY,C.H8,A.hL,A.J5,Z.X$],styles:["[_nghost-%COMP%]   .form-group[_ngcontent-%COMP%]   mat-radio-group[_ngcontent-%COMP%]     label{color:#000}textarea[_ngcontent-%COMP%]{min-height:80px;border-radius:12px}"]}),i})();const U=["dialog"],S=["table"];function D(i,r){if(1&i&&t._UZ(0,"app-create",6),2&i){const l=r.$implicit;t.Q6J("ref",r.dialogRef)("data",l.data)("mode",l.mode)}}const J=[{path:"",component:(()=>{class i{constructor(a,l,u,T,B){this.matDialog=a,this.apiService=l,this.translateService=u,this.datePipe=T,this.themeService=B,this.apiFunc=(y={})=>this.apiService.get(m.A.company.payments,y),this.settings={columns:{payment_amount:{title:"\u0627\u0644\u0645\u0628\u0644\u063a",type:f.Jm.Text},year:{title:"\u0627\u0644\u0633\u0646\u0629",type:f.Jm.Text,filter:!1},created_at:{title:"\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0627\u0636\u0627\u0641\u0629",filter:!1,type:f.Jm.Text,valuePrepareFunction:(y,Y)=>this.datePipe.transform(Y.created_at,"yyyy/MM/dd")},is_approved:{title:"\u0627\u0644\u062d\u0627\u0644\u0629",type:f.Jm.Custom,filter:!1,renderComponent:E.p,onComponentInitFunction:y=>y.statusEnum=this.themeService.settings.COMPANY_SUBSCRIPTION_APPROVE.enum},actions:{title:this.translateService.instant("Options"),type:f.Jm.Custom,renderComponent:x,sort:!1,filter:!1,onComponentInitFunction:y=>{console.log(y),y.parent=this}}}}}ngOnInit(){}openDialog(a=null,l=h.h.Create){this.matDialog.open(this.dialog,{data:{data:a,mode:l}}).afterClosed().subscribe(T=>{T&&this.table.reloadTable()})}}return i.\u0275fac=function(a){return new(a||i)(t.Y36(C.uw),t.Y36(b.s),t.Y36(Z.sK),t.Y36(e.uU),t.Y36(M.f))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-list"]],viewQuery:function(a,l){if(1&a&&(t.Gf(U,5),t.Gf(S,5)),2&a){let u;t.iGM(u=t.CRH())&&(l.dialog=u.first),t.iGM(u=t.CRH())&&(l.table=u.first)}},features:[t._Bn([e.uU])],decls:19,vars:11,consts:[[1,"card-cont"],[1,"d-flex","align-items-center","justify-content-between"],["mat-raised-button","",1,"add-btn",3,"click"],[3,"settings","apiFunc"],["table",""],["dialog",""],[3,"ref","data","mode"]],template:function(a,l){1&a&&(t.TgZ(0,"section",0)(1,"h2"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"mat-card")(5,"mat-card-header")(6,"div",1),t._UZ(7,"div"),t.TgZ(8,"button",2),t.NdJ("click",function(){return l.openDialog()}),t.TgZ(9,"mat-icon"),t._uU(10,"add"),t.qZA(),t._uU(11),t.ALo(12,"translate"),t.ALo(13,"translate"),t.qZA()()(),t.TgZ(14,"mat-card-content"),t._UZ(15,"app-table",3,4),t.qZA()()(),t.YNc(17,D,1,3,"ng-template",null,5,t.W1O)),2&a&&(t.xp6(2),t.hij(" ",t.lcZ(3,5,"ThePayments")," "),t.xp6(9),t.AsE(" ",t.lcZ(12,7,"Create")," ",t.lcZ(13,9,"Payments")," "),t.xp6(4),t.Q6J("settings",l.settings)("apiFunc",l.apiFunc))},dependencies:[s.a,g.Hw,p.a8,p.dk,p.dn,_.lW,F,Z.X$]}),i})()},{path:"",redirectTo:"list",pathMatch:"full"}];let L=(()=>{class i{}return i.\u0275fac=function(a){return new(a||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[c.Bz.forChild(J),c.Bz]}),i})();var N=n(5754),R=n(1948);let j=(()=>{class i{}return i.\u0275fac=function(a){return new(a||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[e.ez,L,N.m,R.Fk]}),i})()},1679:(P,v,n)=>{n.d(v,{Y:()=>M});var e=n(4650),c=n(4763),f=n(6895),h=n(7392),m=n(4859),t=n(4006),g=n(4115),_=n(3416);const x=["control",""];function E(s,p){if(1&s&&(e.TgZ(0,"span",14),e._uU(1),e.qZA()),2&s){const o=e.oxw(2);e.xp6(1),e.hij(" ",o.fileSize," MB ")}}function C(s,p){if(1&s){const o=e.EpF();e.TgZ(0,"button",15),e.NdJ("click",function(){e.CHM(o);const I=e.oxw(2),A=e.MAs(3);return e.KtG(I.deleteFile(A))}),e.TgZ(1,"mat-icon"),e._uU(2,"delete"),e.qZA()()}}function b(s,p){if(1&s&&(e.TgZ(0,"a",16)(1,"mat-icon"),e._uU(2,"download"),e.qZA()()),2&s){const o=e.oxw(2);e.Q6J("href",o.control.value,e.LSH)}}function Z(s,p){if(1&s&&(e.TgZ(0,"div",8)(1,"span",9),e._uU(2),e.qZA(),e.YNc(3,E,2,1,"span",10),e.TgZ(4,"div",11),e.YNc(5,C,3,0,"button",12),e.YNc(6,b,3,1,"a",13),e.qZA()()),2&s){const o=e.oxw();e.xp6(2),e.hij(" ",(null==o.file?null:o.file.name)||o.fileName," "),e.xp6(1),e.Q6J("ngIf",o.file),e.xp6(2),e.Q6J("ngIf",!o.control.disabled),e.xp6(1),e.Q6J("ngIf",!o.file&&o.control.value)}}let M=(()=>{class s{constructor(){this.accept="image/*",this.deleteEvent=new e.vpe,this.FormMode=c.h}ngOnInit(){this.control.value&&"string"==typeof this.control.value&&(this.fileName=this.control.value.substr(this.control.value.lastIndexOf("/")+1))}fileChanged(o){this.file=o.target.files[0],this.fileSize=(this.file.size/1e6).toFixed(2),this.control.setValue(o.target.files[0]),this.control.markAsTouched()}deleteFile(o){this.file=null,o.type="",o.type="file",this.control.setValue(null),console.log(this.control),this.deleteEvent.emit(this.control)}}return s.\u0275fac=function(o){return new(o||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-file-input","control",""]],inputs:{control:"control",accept:"accept"},outputs:{deleteEvent:"deleteEvent"},attrs:x,decls:11,vars:7,consts:[[1,"data"],[1,"input-cont","form-group"],["id","file","type","file","accept","image/*",3,"change"],["input",""],[1,"d-block"],["for","file"],["type","hidden","name","fileHidden",3,"formControl"],["class","file-info d-flex align-items-center justify-content-between",4,"ngIf"],[1,"file-info","d-flex","align-items-center","justify-content-between"],[1,"file-name"],["class","file-size",4,"ngIf"],[1,"d-flex","justify-content-center","align-items-center"],["mat-button","",3,"click",4,"ngIf"],["mat-button","","target","_blank","type","button","download","",3,"href",4,"ngIf"],[1,"file-size"],["mat-button","",3,"click"],["mat-button","","target","_blank","type","button","download","",3,"href"]],template:function(o,d){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"input",2,3),e.NdJ("change",function(A){return d.fileChanged(A)}),e.qZA(),e.TgZ(4,"mat-icon",4),e._uU(5," cloud_upload "),e.qZA(),e.TgZ(6,"label",5),e._uU(7),e.ALo(8,"translate"),e.qZA(),e._UZ(9,"input",6),e.qZA(),e.YNc(10,Z,7,4,"div",7),e.qZA()),2&o&&(e.ekj("has-file",!!d.control.value||d.control.disabled),e.xp6(7),e.hij(" ",e.lcZ(8,5,"StartUploadingFile")," "),e.xp6(2),e.Q6J("formControl",d.control),e.xp6(1),e.Q6J("ngIf",d.file||d.control.value||d.control.disabled))},dependencies:[f.O5,h.Hw,m.lW,m.zs,t.Fj,t.JJ,t.oH,g.J5,_.X$],styles:[".invalid-feedback[_ngcontent-%COMP%]{margin-top:-10px}[_nghost-%COMP%]     app-error{position:absolute;left:0;right:-7px;width:140px;bottom:-36px}.file-name[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;min-width:160px}.file-size[_ngcontent-%COMP%]{margin-left:1rem;margin-right:1rem;min-width:160px}.file-info[_ngcontent-%COMP%]{flex-wrap:wrap}"]}),s})()},9134:(P,v,n)=>{n.d(v,{p:()=>h});var e=n(4650),c=n(7331),f=n(3416);let h=(()=>{class m{ngOnInit(){this._value=this.statusEnum&&this.statusEnum[this.value]?this.statusEnum[this.value]:this.value}}return m.\u0275fac=function(g){return new(g||m)},m.\u0275cmp=e.Xpm({type:m,selectors:[["app-table-status"]],hostAttrs:[1,"status"],inputs:{statusEnum:"statusEnum",value:"value"},decls:4,vars:5,template:function(g,_){1&g&&(e.TgZ(0,"mat-chip-list")(1,"mat-chip"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&g&&(e.xp6(1),e.Tol(_._value),e.xp6(1),e.hij(" ",e.lcZ(3,3,_._value)," "))},dependencies:[c.qn,c.HS,f.X$]}),m})()},4763:(P,v,n)=>{n.d(v,{h:()=>e});var e=(()=>{return(c=e||(e={})).Create="Create",c.Update="Update",c.View="View",c.Delete="Delete",e;var c})()}}]);