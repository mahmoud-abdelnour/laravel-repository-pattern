"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[7660],{7660:(T,p,o)=>{o.r(p),o.d(p,{ResignsModule:()=>J});var s=o(6895),u=o(9197),v=o(2252),h=o(1511),c=o(9134),C=o(4763),t=o(4650),A=o(7392),Z=o(4859);let D=(()=>{class n{constructor(){this.FormMode=C.h}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-actions"]],decls:3,vars:0,consts:[["mat-button","",3,"click"],["color","primary"]],template:function(e,a){1&e&&(t.TgZ(0,"button",0),t.NdJ("click",function(){return a.parent.openDialog(a.FormMode.Create,a.rowData)}),t.TgZ(1,"mat-icon",1),t._uU(2," visibility "),t.qZA()())},dependencies:[A.Hw,Z.lW]}),n})();var g=o(4006),F=o(8746),f=o(5412),U=o(9242),S=o(3416),R=o(2278),M=o(8038),b=o(3546),x=o(4115);const E=["dialog"],L=["table"];function I(n,l){if(1&n&&(t.TgZ(0,"button",17),t._uU(1," \u0627\u0639\u062a\u0645\u0627\u062f "),t.qZA()),2&n){const e=t.oxw(2);t.Q6J("disabled",e.isSaving)}}function O(n,l){if(1&n){const e=t.EpF();t.TgZ(0,"form",4),t.NdJ("ngSubmit",function(){const d=t.CHM(e).$implicit,y=t.oxw();return t.KtG(y.save(null==d.rowData?null:d.rowData.id))}),t.TgZ(1,"h2",5),t._uU(2," \u0637\u0644\u0628 \u0627\u0646\u0647\u0627\u0621 \u062a\u0639\u0627\u0642\u062f "),t.qZA(),t.TgZ(3,"mat-dialog-content",6)(4,"div",7)(5,"div",8)(6,"label",9),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"div",10),t._uU(10),t.qZA()(),t.TgZ(11,"div",8)(12,"label",9),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"div",10),t._uU(16),t.qZA()(),t.TgZ(17,"div",11)(18,"label",12),t._uU(19),t.ALo(20,"translate"),t.qZA(),t.TgZ(21,"div",13),t._uU(22),t.qZA()()()(),t.TgZ(23,"mat-dialog-actions",14)(24,"button",15),t._uU(25," \u0631\u062c\u0648\u0639 "),t.qZA(),t.YNc(26,I,2,1,"button",16),t.qZA()()}if(2&n){const e=l.$implicit,a=t.oxw();t.Q6J("formGroup",a.form),t.xp6(7),t.hij(" ",t.lcZ(8,8,"\u0627\u0644\u0648\u0638\u064a\u0641\u0629 \u0627\u0644\u062d\u0627\u0644\u064a\u0629 ")," "),t.xp6(3),t.Oqu(null==e.rowData||null==e.rowData.employee||null==e.rowData.employee.job?null:e.rowData.employee.job.job_title),t.xp6(3),t.hij(" ",t.lcZ(14,10," \u0627\u0644\u0634\u0631\u0643\u0629 ")," "),t.xp6(3),t.Oqu(null==e.rowData||null==e.rowData.company?null:e.rowData.company.name_ar),t.xp6(3),t.hij(" ",t.lcZ(20,12,"Notes")," "),t.xp6(3),t.Oqu(null==e.rowData?null:e.rowData.notes),t.xp6(4),t.Q6J("ngIf",(null==e?null:e.rowData.status)==a.themeService.settings.RESIGN_STATUS.enum.pending)}}const j=[{path:"list",component:(()=>{class n{constructor(e,a,i,d,y){this.matDialog=e,this.apiService=a,this.translateService=i,this.themeService=d,this.datePipe=y,this.apiFunc=(r={})=>this.apiService.get(h.A.provider.resigns,r),this.settings={columns:{employee_name:{title:" \u0627\u0644\u0645\u0648\u0638\u0641 ",type:"string",filter:!1,valuePrepareFunction:(r,m)=>m.employee.name_ar},job_title:{title:" \u0627\u0644\u0648\u0638\u064a\u0641\u0629 ",type:"string",filter:!1,valuePrepareFunction:(r,m)=>m.employee.job.job_title},company:{title:" \u0627\u0644\u0634\u0631\u0643\u0629 ",type:"string",filter:!1,valuePrepareFunction:(r,m)=>m.company.name_ar},status:{title:"\u0627\u0644\u062d\u0627\u0644\u0629",filter:!1,type:v.Jm.Custom,renderComponent:c.p,onComponentInitFunction:r=>{r.statusEnum=this.themeService.settings.RESIGN_STATUS.enum}},date:{title:"\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0637\u0644\u0628",type:"string",filter:!1,valuePrepareFunction:(r,m)=>this.datePipe.transform(m.created_at,"yyyy/MM/dd")},actions:{title:this.translateService.instant("Options"),type:v.Jm.Custom,renderComponent:D,sort:!1,filter:!1,onComponentInitFunction:r=>{console.log(r),r.parent=this}}}},this.firstTime=!1}ngOnInit(){this.form=new g.cw({notes:new g.NI(null)})}openDialog(e=null,a){console.log(a),this.dialogRef=this.matDialog.open(this.dialog,{data:{data:e,rowData:a}}),this.dialogRef.afterClosed().subscribe(i=>{console.log(`Dialog result: ${i}`)})}save(e){this.isSaving=!0;let a=new FormData;a.append("emp_id",e),this.apiService.post(h.A.provider.approve_resign+"/"+e,a).pipe((0,F.x)(()=>this.isSaving=!1)).subscribe(d=>{console.log(d),this.themeService.openSnackBar(this.translateService.instant("SavedSuccessfully"),null),this.dialogRef.close(!0),this.table.reloadTable()})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(f.uw),t.Y36(U.s),t.Y36(S.sK),t.Y36(R.f),t.Y36(s.uU))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-list"]],viewQuery:function(e,a){if(1&e&&(t.Gf(E,5),t.Gf(L,5)),2&e){let i;t.iGM(i=t.CRH())&&(a.dialog=i.first),t.iGM(i=t.CRH())&&(a.table=i.first)}},features:[t._Bn([s.uU])],decls:9,vars:2,consts:[[1,"card-cont"],[3,"settings","apiFunc"],["table",""],["dialog",""],[3,"formGroup","ngSubmit"],["mat-dialog-title",""],[1,"mat-typography"],[1,"row"],[1,"col-md-6","mb-4","form-group"],["for","amount"],[1,"form-control"],[1,"col-md-12","mb-4","form-group"],["for","notes"],["name","notes","id","notes","cols","15","rows","8"],["align","end",1,"actions"],["type","button","mat-button","","mat-dialog-close","",1,"cancel"],["mat-button","","cdkFocusInitial","","class","save",3,"disabled",4,"ngIf"],["mat-button","","cdkFocusInitial","",1,"save",3,"disabled"]],template:function(e,a){1&e&&(t.TgZ(0,"section",0)(1,"h2"),t._uU(2," \u0637\u0644\u0628\u0627\u062a \u0627\u0646\u0647\u0627\u0621 \u0627\u0644\u062a\u0639\u0627\u0642\u062f "),t.qZA(),t.TgZ(3,"mat-card")(4,"mat-card-content"),t._UZ(5,"app-table",1,2),t.qZA()()(),t.YNc(7,O,27,14,"ng-template",null,3,t.W1O)),2&e&&(t.xp6(5),t.Q6J("settings",a.settings)("apiFunc",a.apiFunc))},dependencies:[s.O5,M.a,b.a8,b.dn,Z.lW,g._Y,g.JL,g.sg,f.ZT,f.uh,f.xY,f.H8,x.hL,S.X$]}),n})()},{path:"",redirectTo:"list",pathMatch:"full"}];let w=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[u.Bz.forChild(j),u.Bz]}),n})();var P=o(5754);let J=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[s.ez,P.m,w]}),n})()},9134:(T,p,o)=>{o.d(p,{p:()=>h});var s=o(4650),u=o(7331),v=o(3416);let h=(()=>{class c{ngOnInit(){this._value=this.statusEnum&&this.statusEnum[this.value]?this.statusEnum[this.value]:this.value}}return c.\u0275fac=function(t){return new(t||c)},c.\u0275cmp=s.Xpm({type:c,selectors:[["app-table-status"]],hostAttrs:[1,"status"],inputs:{statusEnum:"statusEnum",value:"value"},decls:4,vars:5,template:function(t,A){1&t&&(s.TgZ(0,"mat-chip-list")(1,"mat-chip"),s._uU(2),s.ALo(3,"translate"),s.qZA()()),2&t&&(s.xp6(1),s.Tol(A._value),s.xp6(1),s.hij(" ",s.lcZ(3,3,A._value)," "))},dependencies:[u.qn,u.HS,v.X$]}),c})()},4763:(T,p,o)=>{o.d(p,{h:()=>s});var s=(()=>{return(u=s||(s={})).Create="Create",u.Update="Update",u.View="View",u.Delete="Delete",s;var u})()}}]);